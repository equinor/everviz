language: python

addons:
  chrome: stable

python:
    - '3.6'
    - '3.7'

before_install:
    - wget https://chromedriver.storage.googleapis.com/$(wget https://chromedriver.storage.googleapis.com/LATEST_RELEASE -q -O -)/chromedriver_linux64.zip
    - unzip chromedriver_linux64.zip
    - export PATH=$PATH:$PWD

install:
    - pip install .
    - pip install -r test_requirements.txt

script:
    - pytest --headless

deploy:
  - provider: pypi
    distributions: bdist_wheel sdist
    skip_existing: true
    user: statoil-travis
    password:
      secure: "WiP8rRHMLs7hzhgVTUqb33qtPHd9tFnQ1JIFhkrYLKvy/Trcyr60sGG1yMh2XdGPVNQYDArRcQRjpH+wQCmWWabJ4pm5XTpQH2XM2HhpBC77TO+mSPyrXf6lvVJplxn69gRpoEDZG2dC5cppOTWJ6dgtLTj9hWKeEXUTy2o3h9l05i3mnTsFKNSwP0tv15p0EX/TEcM7S8Wet0KB4SOr8T7+0dZCstvsvMK4TSjOrxM7g4faJTdkFTlEd4XTm4XLFfwE5lfzCp86W15524twEMM4UUduB6b6cmTqTGPD+1seGl/u/kinpuuhoUsqy2cxXKosWZmA4Cqyf1AUsYK+Jg+2rEmrVwcfFo7cKPNWG4A9HIYbQhKlPGPdb1kc4rxwQgbD/VQww0DdC2AFwv4702/mxDuw7/V56dovSKRiLYtB4+krk5JQBq27xY5QcOgrZ5nlxQAOaTHM1OE6/CyHoFDRmYEqGcrW7sLNhkNefX247WT2cEPj+IbIz/Y+PysJB0cYNDXZvdEUDGfnFZFoXhA80O9LJILLw/5rl4B1sTbemiaNAZ8u5U3phbYHR6t0RbEMhEyKD2V5NIfWXdZanp5IMELYEnMNZiAXlRiz9jINOPmfIX37SIm7UPmX5FwG47uUzj71gm1Ef5L1v7VYAM3hmYEbuxOROqMomif8obo="
    on:
      tags: true
      branch: master
